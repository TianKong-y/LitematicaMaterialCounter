# Litematica Material Counter

## 简介
Litematica Material Counter 是一个 Python 脚本，用于精确统计 `.litematic` 投影文件中的所有建筑材料。它能够深入容器（如箱子、潜影盒）内部进行统计，区分不同NBT数据的物品（例如自定义名称、附魔），最终将统计结果输出为易于阅读和处理的 CSV 文件。

## 功能特点
*   **全面统计**: 统计投影中的所有方块和可获取的实体（如物品展示框本身），并递归统计标准容器（箱子、木桶、发射器、投掷器、漏斗等）以及潜影盒内部的物品。
*   **NBT区分**: 能够识别并区分具有不同NBT标签的同一ID物品，例如不同自定义名称的工具或不同附魔等级的书籍。
*   **CSV输出**: 生成详细的CSV格式报告，包含物品的（中文）名称、命名空间ID、NBT信息摘要、总数量以及估算存储所需的潜影盒数量。

## 依赖项
*   Python 3.7+ (推荐 3.9+)
*   `litemapy` (用于解析 `.litematic` 文件)
*   `nbtlib` (用于处理NBT数据)

## 安装与使用

1.  **克隆或下载项目**

2.  **安装依赖项**:
    在项目根目录下，有一个 `requirements.txt` 文件列出了所需的库。通过以下命令安装：
    ```bash
    pip install -r requirements.txt
    ```

## 使用方法

在项目根目录打开cmd或Powershell，通过命令行运行 `material_counter.py` 脚本。

**示例命令**:
例如，在将投影文件放入本项目的schematics文件夹后
```bash
python ./material_counter.py ./schematics/{投影文件名称}.litematic
```

## 输出CSV格式说明

在导入的投影文件的同一级目录下，会生成一个{投影文件名称}_materials.csv
输出的CSV文件包含以下列：

*   `物品名称`: 物品的显示名称。如果配置了中文语言文件且找到对应翻译，则为中文名称；否则为处理后的英文ID。
*   `物品ID`: 物品的完整命名空间ID (例如 `minecraft:diamond_pickaxe`)。
*   `NBT信息`: 对物品NBT数据的关键信息摘要。常见的包括：
    *   `标准`: 表示物品没有特殊的、被追踪的NBT标签。
    *   `名称: <自定义名称>`: 显示物品的自定义名称。
    *   `附魔: <附魔1> <等级1>, <附魔2> <等级2>`: 列出物品的附魔及其等级（等级以罗马数字显示）。
    *   `药水: <药水效果ID>`: 显示药水的基本效果ID。
    *   其他NBT信息会以键值对形式简要展示，并用分号分隔不同类型的NBT。
*   `数量 (个)`: 该物品（具有相同ID和NBT信息）在投影中的总数量。
*   `数量 (潜影盒)`: 根据标准27格潜影盒计算，存储这么多物品大约需要多少个潜影盒。结果保留3位小数。

## 贡献
欢迎通过 Issue 或 Pull Request 提出改进建议或代码贡献。

## 鸣谢
